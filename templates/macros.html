<!-- https://github.com/RatanShreshtha/DeepThought/blob/6bc44df307ab8f03c31ffe3ca99421072ec6f8bd/templates/macros.html#L92-L117 -->

{% macro render_tags(tags) %}
    {% for tag in tags %}
      <a class="tag" href="{{ get_taxonomy_url(kind='tags', name=tag) }}">{{ tag }}</a>{% if not loop.last %},{% endif %}
    {% endfor %}
{% endmacro %}

{% macro page_header(page) %}
  <h1 class="post-title">
    <a href="{{ page.permalink }}">
      {{ page.title }}
    </a>
  </h1>
  <span class="post-date">
    {{ page.date | safe }}
    {% if page.taxonomies.tags %}
      &#183; {{ self::render_tags(tags=page.taxonomies.tags) }}
    {% endif %}
  </span>
{% endmacro %}

{% macro page_preview(page) %}

  {{ self::page_header(page=page) }}

  <p>
    {{ page.summary | safe }}
  </p>

  <a href="{{ page.permalink ~ "#continue-reading" }}">Continue Reading</a>
{% endmacro %}

{% macro seo() %}
{% set author = config.extra.author | default(value='Anonymous') %} {% if
page.title %} {% set title = page.title %} {% elif section.title %} {% set
title = section.title %} {% else %} {% set title = "Home" %} {% endif %} {%
if page.description %} {% set description = page.description %} {% elif
page.summary %} {% set description = page.summary | safe %} {% elif
section.description %} {% set description = section.description %} {% else
%} {% set description = config.description %} {% endif %} {% if
page.permalink %} {% set canonical_url = page.permalink %} {% elif
section.permalink %} {% set canonical_url = section.permalink %} {% else %}
{% set canonical_url = config.base_url %} {% endif %}

<meta name="author" content="{{ author }}" />
<meta
name="generator"
content="{{ config.extra.generator | default(value='Zola') }}"
/>
<meta property="og:site_name" content="{{ config.title }}" />

<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />

{% if config.extra.twitter %}
<meta name="twitter:creator" content="{{ config.extra.twitter }}" />
<meta name="twitter:site" content="{{ config.extra.twitter }}" />
{% endif %}

<meta property="og:title" content="{{ title }}" />
<meta property="twitter:title" content="{{ title }}" />

<meta name="description" content="{{ description }}" />
<meta name="og:description" content="{{ description }}" />
<meta name="twitter:description" content="{{ description }}" />

<link rel="canonical" href="{{ canonical_url }}" />
<meta property="og:url" content="{{ canonical_url }}" />
{% endmacro %}

{% macro icons() %}
<link
  rel="shortcut icon"
  href="{{ get_url(path='images/favicon.ico', cachebust=true) }}"
/>
<!>
<link rel="apple-touch-icon" sizes="48x48" href="{{
resize_image(path="../static/images/apple-touch-icon-precomposed.png", width=48,
height=48, op="fill") }}" />
<!>
<link rel="apple-touch-icon" sizes="72x72" href="{{
resize_image(path="../static/images/apple-touch-icon-precomposed.png", width=72,
height=72, op="fill") }}" />
<!>
<link rel="apple-touch-icon" sizes="96x96" href="{{
resize_image(path="../static/images/apple-touch-icon-precomposed.png", width=96,
height=96, op="fill") }}" />
<!>
<link rel="apple-touch-icon" sizes="144x144" href="{{
resize_image(path="../static/images/apple-touch-icon-precomposed.png",
width=144, height=144, op="fill") }}" />
<!>
<link rel="apple-touch-icon" sizes="192x192" href="{{
resize_image(path="../static/images/apple-touch-icon-precomposed.png",
width=192, height=192, op="fill") }}" />
<!>
<link rel="apple-touch-icon" sizes="256x256" href="{{
resize_image(path="../static/images/apple-touch-icon-precomposed.png",
width=256, height=256, op="fill") }}" />
<!>
<link rel="apple-touch-icon" sizes="384x384" href="{{
resize_image(path="../static/images/apple-touch-icon-precomposed.png",
width=384, height=384, op="fill") }}" />
<!>
<link rel="apple-touch-icon" sizes="512x512" href="{{
resize_image(path="../static/images/apple-touch-icon-precomposed.png",
width=512, height=512, op="fill") }}" />
{% endmacro %}

{% macro matomo() %}
<script type="text/javascript">
var _paq = (window._paq = window._paq || []);
/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
_paq.push(["setCookieDomain", "*.www.nihilistkitten.me"]);
_paq.push(["trackPageView"]);
_paq.push(["enableLinkTracking"]);
(function () {
var u = "//matomo.nihilistkitten.me/";
_paq.push(["setTrackerUrl", u + "matomo.php"]);
_paq.push(["setSiteId", "1"]);
var d = document,
  g = d.createElement("script"),
  s = d.getElementsByTagName("script")[0];
g.type = "text/javascript";
g.async = true;
g.src = u + "matomo.js";
s.parentNode.insertBefore(g, s);
})();
</script>
{% endmacro %}
